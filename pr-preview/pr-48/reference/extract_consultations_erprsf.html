<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extraction des consultations dans le DCIR. — extract_consultations_erprsf • sndsTools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extraction des consultations dans le DCIR. — extract_consultations_erprsf"><meta name="description" content="Cette fonction permet d'extraire les consultations dans le DCIR. Les
consultations dont les dates EXE_SOI_DTD sont comprises entre start_date
et end_date (incluses) sont extraites."><meta property="og:description" content="Cette fonction permet d'extraire les consultations dans le DCIR. Les
consultations dont les dates EXE_SOI_DTD sont comprises entre start_date
et end_date (incluses) sont extraites."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sndsTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/benchmark_dplyr_vs_rsql.html">Benchmarking dplyr vs RSQL</a></li>
    <li><a class="dropdown-item" href="../articles/contribuer.html">Contribuer</a></li>
    <li><a class="dropdown-item" href="../articles/gouvernance.html">Gouvernance</a></li>
    <li><a class="dropdown-item" href="../articles/paresnds.html">Prise en main</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SNDStoolers/sndsTools" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extraction des consultations dans le DCIR.</h1>
      <small class="dont-index">Source: <a href="https://github.com/SNDStoolers/sndsTools/tree/main/R/extract_consultations_erprsf.R" class="external-link"><code>R/extract_consultations_erprsf.R</code></a></small>
      <div class="d-none name"><code>extract_consultations_erprsf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Cette fonction permet d'extraire les consultations dans le DCIR. Les
consultations dont les dates <code>EXE_SOI_DTD</code> sont comprises entre <code>start_date</code>
et <code>end_date</code> (incluses) sont extraites.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_consultations_erprsf</span><span class="op">(</span></span>
<span>  <span class="va">start_date</span>,</span>
<span>  <span class="va">end_date</span>,</span>
<span>  pse_spe_filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prestation_filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dis_dtd_lag_months <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  patients_ids_filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_table_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  conn <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-start-date">start_date<a class="anchor" aria-label="anchor" href="#arg-start-date"></a></dt>
<dd><p>Date. La date de début de la période des consultations à
extraire.</p></dd>


<dt id="arg-end-date">end_date<a class="anchor" aria-label="anchor" href="#arg-end-date"></a></dt>
<dd><p>Date. La date de fin de la période des consultations à
extraire.</p></dd>


<dt id="arg-pse-spe-filter">pse_spe_filter<a class="anchor" aria-label="anchor" href="#arg-pse-spe-filter"></a></dt>
<dd><p>Character vector (Optionnel). Les codes spécialités des
médecins (référentiel <code>IR_SPE_V</code>) effectuant les consultations à extraire. Si
<code>pse_spe_filter</code> n'est pas fourni, les consultations de tous les spécialités
sont extraites. Défaut à <code>NULL</code>.</p></dd>


<dt id="arg-prestation-filter">prestation_filter<a class="anchor" aria-label="anchor" href="#arg-prestation-filter"></a></dt>
<dd><p>Character vector (Optionnel). Les codes des
prestations à extraire en norme B5 (colonne <code>PRS_NAT_REF</code>, référentiel
<code>IR_NAT_V</code>). Si <code>prestation_filter</code> n'est pas fourni, les consultations de
tous les prestations sont extraites. Les codes des prestations sont
disponibles sur la page "Cibler selon les natures de prestations"(https://documentation-snds.health-data-hub.fr/snds/fiches/
prestation.html) de la documentation SNDS. Défaut à <code>NULL</code>.</p></dd>


<dt id="arg-dis-dtd-lag-months">dis_dtd_lag_months<a class="anchor" aria-label="anchor" href="#arg-dis-dtd-lag-months"></a></dt>
<dd><p>Integer (Optionnel). Le nombre maximum de mois de
décalage de <code>FLX_DIS_DTD</code> par rapport à <code>EXE_SOI DTD</code> pris en compte pour
récupérer les consultations. Défaut à 6 mois.</p></dd>


<dt id="arg-patients-ids-filter">patients_ids_filter<a class="anchor" aria-label="anchor" href="#arg-patients-ids-filter"></a></dt>
<dd><p>data frame (Optionnel). Un data frame contenant
les paires d'identifiants des patients pour lesquels les consultations
doivent être extraites. Les colonnes de ce data frame doivent être
<code>BEN_IDT_ANO</code>, <code>BEN_NIR_PSA</code> et <code>BEN_RNG_GEM</code>. Les BEN_NIR_PSA doivent être
tous les BEN_NIR_PSA associés
aux BEN_IDT_ANO fournis. Défaut à <code>NULL</code>.</p></dd>


<dt id="arg-output-table-name">output_table_name<a class="anchor" aria-label="anchor" href="#arg-output-table-name"></a></dt>
<dd><p>Character (Optionnel). Si fourni, les résultats
seront sauvegardés dans une table portant ce nom dans la base de données au
lieu d'être retournés sous forme de data frame. Si cette table existe déjà,
le programme s'arrête avec un message d'erreur. Défaut à <code>NULL</code>.</p></dd>


<dt id="arg-conn">conn<a class="anchor" aria-label="anchor" href="#arg-conn"></a></dt>
<dd><p>DBI connection (Optionnel). Une connexion à la base de données
Oracle. Par défaut, une connexion est établie avec oracle.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Si <code>output_table_name</code> est <code>NULL</code>, retourne un data frame contenant
les consultations. Si <code>output_table_name</code> est fourni, sauvegarde les
résultats dans la table spécifiée dans Oracle et retourne <code>NULL</code> de manière
invisible.
Dans les deux cas les colonnes de la table de sortie sont :</p><ul><li><p><code>BEN_NIR_PSA</code> : Colonne présente uniquement si les identifiants
patients (<code>patients_ids_filter</code>) ne sont pas fournis. Identifiant SNDS,
aussi appelé pseudo-NIR.</p></li>
<li><p><code>BEN_IDT_ANO</code> : Colonne présente uniquement si les identifiants
patients (<code>patients_ids_filter</code>) sont fournis. Numéro d’inscription
au répertoire (NIR) anonymisé.</p></li>
<li><p><code>EXE_SOI_DTD</code> : Date de la consultation.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Le décalage de remontée des données est pris en compte en récupérant
également les consultations dont les dates <code>FLX_DIS_DTD</code> sont comprises dans
les <code>dis_dtd_lag_months</code> mois suivant <code>end_date</code>.</p>
<p>Si <code>patients_ids_filter</code> est fourni, seules les consultations pour les
patients dont les identifiants sont dans <code>patients_ids_filter</code> sont
extraites. Dans le cas contraire, les consultations de tous les patients sont
extraites.</p>
<p>Pour être à flux constant sur l'ensemble des années, il faut utiliser
<code>dis_dtd_lag_months = 27</code> Cela rallonge le temps d'extraction alors que
l'impact sur l'extraction est minime car <a href="https://documentation-snds.health-data-hub.fr/snds/formation_snds/initiation/schema_relationnel_snds.html#_3-3-2-2-dates" class="external-link">la Cnam estime que 99 % des soins sont remontés à 6 mois</a>
c'est-à-dire pour <code>dis_dtd_lag_months = 6</code>.</p>
<p>Un guide sur l'activité des médecins libéraux est disponibles sur la page
<a href="https://documentation-snds.health-data-hub.fr/snds/fiches/activite_medecins.html#contexte" class="external-link">Activité des médecins libéraux</a>. #nolint</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">dispenses</span> <span class="op">&lt;-</span> <span class="fu">extract_consultations_erprsf</span><span class="op">(</span></span></span>
<span class="r-in"><span>  start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2010-01-01"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2010-01-03"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  pse_spe_filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span>, <span class="st">"00"</span>, <span class="st">"36"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/abelloir-zz" class="external-link">Antoine Belloir</a>, <a href="https://info.m2dou.fr/" class="external-link">Matthieu Doutreligne</a>, <a href="https://github.com/ThomasSoeiro" class="external-link">Thomas Soeiro</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

